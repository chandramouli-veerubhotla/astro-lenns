import{e as Z,i as J}from"./chunk-PZOOQV5H.js";import{a as ee,b as te,c as ne,d as ie,e as oe,g as ae,i as re,j as se,k as le,l as me,m as ce}from"./chunk-MOM5VYPL.js";import"./chunk-TKLXGDG4.js";import{a as q,b as I,d as K}from"./chunk-64VSCPUL.js";import{a as U,y as G}from"./chunk-XLHTV7PN.js";import{$ as v,$a as p,Ab as R,Ba as l,Cb as o,Db as H,Eb as C,Fb as V,Mb as W,Oa as x,Ob as X,Pa as j,R as N,Rb as f,S as B,Tb as $,W as k,_a as u,a as b,aa as M,bb as Y,cb as E,db as T,eb as P,fb as m,gb as c,hb as L,ib as r,jb as s,jc as z,kc as Q,la as y,lb as w,nb as D,ob as g,pb as h}from"./chunk-U2TFBYK2.js";var de=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=j({type:i});static \u0275inj=B({imports:[I,J,G,Z]})}return i})();var he="astro-lenns-db",d="locations",ge=1,_=class i{locationsSignal=y([]);locations$=f(()=>this.locationsSignal());constructor(){this.loadAll()}waitForTx(e){return new Promise((t,n)=>{e.oncomplete=()=>t(),e.onerror=()=>n(e.error),e.onabort=()=>n(e.error)})}openDB(){return new Promise((e,t)=>{let n=indexedDB.open(he,ge);n.onupgradeneeded=()=>{let a=n.result;a.objectStoreNames.contains(d)||a.createObjectStore(d,{keyPath:"id",autoIncrement:!0})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}async tx(e,t){let a=(await this.openDB()).transaction(d,e);return t(a.objectStore(d)),await this.waitForTx(a)}async saveNewLocation(e){await this.tx("readwrite",t=>t.add(e)),await this.loadAll()}async editLocation(e,t){let a=(await this.openDB()).transaction(d,"readwrite"),S=a.objectStore(d),F=S.get(e);F.onsuccess=()=>{S.put(b(b({},F.result),t))},await this.waitForTx(a),await this.loadAll()}async deleteLocation(e){await this.tx("readwrite",t=>t.delete(e)),await this.loadAll()}async loadAll(){let a=(await this.openDB()).transaction(d,"readonly").objectStore(d).getAll();a.onsuccess=()=>this.locationsSignal.set(a.result)}async shareLocation(e){let t=`https://maps.google.com/?q=${e.latitude},${e.longitude}`,n=e.address?e.address:e.name;navigator.share?navigator.share({title:e.name,text:`Check out this location: ${n}`,url:t}).catch(()=>window.open(t,"_blank")):window.open(t,"_blank")}openInMaps(e){let t=`https://maps.google.com/?q=${e.latitude},${e.longitude}`;window.open(t,"_blank")}async importLocationFromUrl(e){let t=this.extractCoordinates(e);t&&await this.saveNewLocation({name:"Imported location",type:"Other",latitude:t.lat,longitude:t.lng,isDefault:!1,tags:["Imported"]})}extractCoordinates(e){let t=e.match(/q=(-?\d+.\d+),(-?\d+.\d+)/);return t?{lat:parseFloat(t[1]),lng:parseFloat(t[2])}:null}static \u0275fac=function(t){return new(t||i)};static \u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"})};function _e(i,e){if(i&1&&(r(0,"span",14),o(1),s()),i&2){let t=e.$implicit;l(),C(" #",t," ")}}function be(i,e){if(i&1&&(r(0,"span",15),o(1),s()),i&2){let t=h();l(),C(" +",t.location().tags.length-2," ")}}function ve(i,e){if(i&1){let t=w();r(0,"button",22),g("click",function(){v(t);let a=h();return M(a.setAsDefault())}),r(1,"span",21),o(2,"star"),s(),o(3," Set Default "),s()}}function Me(i,e){i&1&&(r(0,"div",19)(1,"span",23),o(2,"verified"),s(),r(3,"span",24),o(4,"Default"),s()())}var O=class i{service=k(_);location=$.required();typeIconMap={Home:"home",Work:"work",Temple:"temple_hindu",Other:"location_on"};icon=f(()=>this.typeIconMap[this.location().type]);share(){this.service.shareLocation(this.location())}delete(){this.service.deleteLocation(this.location().id)}openInMaps(){this.service.openInMaps(this.location())}setAsDefault(){}shareLocation(){}deleteLoc(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-location-card"]],inputs:{location:[1,"location"]},decls:37,vars:19,consts:[[1,"relative","p-5","bg-white","rounded-[1.5rem]","border","border-slate-100","shadow-sm","active:bg-slate-50","transition-all","duration-200"],[1,"flex","items-start","gap-4","mb-2"],[1,"w-12","h-12","rounded-2xl","flex","items-center","justify-center","shrink-0"],[1,"material-symbols-rounded","text-xl"],[1,"flex-grow","min-w-0"],[1,"font-headings","font-semibold","text-lg","truncate","pr-2"],[1,"flex","items-center","gap-1","text-[9px]","font-sans","font-bold","text-slate-600","py-2"],[1,"material-symbols-rounded","text-[14px]"],[1,"flex","items-center","gap-1","shrink-0"],[1,"cursor-pointer","w-9","h-9","flex","items-center","justify-center","rounded-full","text-red-400","active:scale-90","transition-transform",3,"click"],[1,"material-symbols-rounded","text-[20px]"],[1,"mb-4","pr-2"],[1,"text-xs","text-secondary","font-sans","leading-relaxed","line-clamp-2","min-h-[2.4rem]","opacity-80"],[1,"flex","flex-wrap","gap-1.5","mt-1.5"],[1,"px-2","py-0.5","bg-slate-100","text-[9px]","font-bold","text-slate-500","rounded","uppercase","tracking-tight"],[1,"px-2","py-0.5","bg-primary/5","text-[9px]","font-bold","text-primary","rounded","uppercase"],[1,"flex","items-center","justify-between","pt-3","border-t-2","border-slate-50"],[1,"flex","items-center","gap-2"],[1,"flex","items-center","gap-1.5","px-3","py-2","bg-slate-100","text-slate-600","rounded-xl","text-[11px]","font-bold","active:bg-primary/10","active:text-primary","transition-all"],[1,"flex","items-center","gap-1.5","px-3","py-2","bg-primary/10","text-primary","rounded-xl"],[1,"cursor-pointer","flex","items-center","gap-1.5","px-3","py-2","bg-primary","text-primary","rounded-xl","text-[11px]","font-semibold","active:scale-95","transition-transform",3,"click"],[1,"material-symbols-rounded","text-sm"],[1,"flex","items-center","gap-1.5","px-3","py-2","bg-slate-100","text-slate-600","rounded-xl","text-[11px]","font-bold","active:bg-primary/10","active:text-primary","transition-all",3,"click"],[1,"material-symbols-rounded","text-sm","active"],[1,"text-[10px]","font-black","uppercase","tracking-wider"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),o(4),s()(),r(5,"div",4)(6,"h3",5),o(7),s(),r(8,"div",6)(9,"span",7),o(10,"explore"),s(),o(11),s()(),r(12,"div",8)(13,"button",9),g("click",function(){return n.delete()}),r(14,"span",10),o(15,"delete_outline"),s()()()(),r(16,"div",11)(17,"p",12),o(18),s(),r(19,"div",13),E(20,_e,2,1,"span",14,Y),W(22,"slice"),u(23,be,2,1,"span",15),s()(),r(24,"div",16)(25,"div",17),u(26,ve,4,0,"button",18)(27,Me,5,0,"div",19),s(),r(28,"div",17)(29,"button",20),g("click",function(){return n.share()}),r(30,"span",21),o(31,"ios_share"),s(),o(32," Share "),s(),r(33,"button",20),g("click",function(){return n.openInMaps()}),r(34,"span",21),o(35,"map"),s(),o(36," view Map "),s()()()()),t&2&&(l(2),R("bg-blue-600",n.location().isDefault)("bg-slate-200",!n.location().isDefault),l(),R("text-white",n.location().isDefault)("text-slate-400",!n.location().isDefault),l(),C(" ",n.icon()," "),l(3),H(n.location().name),l(4),V(" ",n.location().latitude.toFixed(3),", ",n.location().longitude.toFixed(3)," "),l(7),C(" ",n.location().address," "),l(2),T(X(22,15,n.location().tags,0,2)),l(3),p(n.location().tags.length>2?23:-1),l(3),p(n.location().isDefault?26:27))},dependencies:[z],encapsulation:2})};var ye=(i,e)=>e.id;function xe(i,e){if(i&1){let t=w();m(0,"button",12),D("click",function(){v(t);let a=h();return M(a.searchQuery.set(""))}),o(1," close "),c()}}function we(i,e){i&1&&(m(0,"div",10)(1,"span",13),o(2," location_off "),c(),m(3,"div")(4,"p",14),o(5,"No locations saved"),c(),m(6,"p",15),o(7,"Add your home, work or favorite places"),c()()())}function De(i,e){i&1&&(m(0,"div",10)(1,"span",13),o(2," search_off "),c(),m(3,"div")(4,"p",14),o(5,"No results found"),c(),m(6,"p",15),o(7,"Try a different name or tag"),c()()())}function Ce(i,e){if(i&1&&L(0,"app-location-card",16),i&2){let t=e.$implicit;P("location",t)}}function Ie(i,e){if(i&1&&(m(0,"div",11),E(1,Ce,1,1,"app-location-card",16,ye),c()),i&2){let t=h();l(),T(t.locations())}}var ue=class i{showSearch=y(!1);searchQuery=y("");service=k(_);allLocations=this.service.locations$;locations=f(()=>{let e=this.searchQuery().trim().toLowerCase();return e?this.allLocations().filter(t=>t.name.toLowerCase().includes(e)||t.address?.toLowerCase().includes(e)||t.tags?.some(n=>n.toLowerCase().includes(e))||t.type.toLowerCase().includes(e)):this.allLocations()});ngAfterViewInit(){}deleteLoc(e){}setAsDefault(e){}toggleSearch(){this.showSearch.set(!this.showSearch()),this.showSearch()||this.searchQuery.set("")}addLocation(){this.service.saveNewLocation({name:"Bantumilli, Krishna, AP sdlfjalksdfl;ka weiplsakdnlkasflk",type:"Other",latitude:16.2833,longitude:80.8667,tags:["Village","Hometown"],isDefault:!1})}openInMaps(e){let t=`www.google.com{loc.lat},${e.lng}`;navigator.share?navigator.share({title:e.name,text:`Check out this location: ${e.address}`,url:t}).catch(()=>window.open(t,"_blank")):window.open(t,"_blank")}shareLocation(e){let t=`https://www.google.com/maps?q=${e.lat},${e.lng}`;navigator.share?navigator.share({title:e.name,text:e.address,url:t}):navigator.clipboard.writeText(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-saved-locations-page"]],decls:18,vars:3,consts:[[1,"absolute","right-6","bottom-26","z-10"],[1,"p-4","bg-blue-600","text-white","rounded-full","shadow-lg","active:scale-95","transition-transform","flex","items-center","justify-center",3,"click"],[1,"material-symbols-rounded"],["header","",1,"flex","flex-col","header-padding","gap-6"],[1,"page-heading"],["appearance","outline",1,"w-full"],["matPrefix","",1,"material-symbols-rounded","px-4"],["matInput","","placeholder","Search locations",3,"ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"material-symbols-rounded","px-4"],[1,"py-6","flex","flex-col","flex-grow","overflow-y-auto","pb-16"],[1,"flex","flex-col","items-center","justify-center","text-center","gap-4","mt-16","text-gray-500"],[1,"flex","flex-col","gap-4"],["matSuffix","","mat-icon-button","","aria-label","Clear",1,"material-symbols-rounded","px-4",3,"click"],[1,"material-symbols-rounded","text-5xl","text-gray-300","bg-gray-100","rounded-full","p-4"],[1,"text-lg","font-medium"],[1,"text-sm"],[3,"location"]],template:function(t,n){t&1&&(m(0,"app-container")(1,"div",0)(2,"button",1),D("click",function(){return n.addLocation()}),m(3,"span",2),o(4,"add_location_alt"),c()()(),m(5,"section",3)(6,"h1",4),o(7,"Locations"),c(),m(8,"div")(9,"mat-form-field",5)(10,"span",6),o(11,"search"),c(),m(12,"input",7),D("ngModelChange",function(S){return n.searchQuery.set(S)}),c(),u(13,xe,2,0,"button",8),c()()(),m(14,"section",9),u(15,we,8,0,"div",10)(16,De,8,0,"div",10)(17,Ie,3,0,"div",11),c()()),t&2&&(l(12),P("ngModel",n.searchQuery()),l(),p(n.searchQuery()?13:-1),l(2),p(n.locations().length===0&&!n.searchQuery()?15:n.locations().length===0&&n.searchQuery()?16:17))},dependencies:[le,ae,re,se,Q,U,I,de,ie,ne,ee,te,ce,me,oe,K,q,O],styles:[".line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.self-end[_ngcontent-%COMP%]{align-self:flex-end}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.animate-slideDown[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .15s ease-out}"]})};export{ue as SavedLocationsPage};
